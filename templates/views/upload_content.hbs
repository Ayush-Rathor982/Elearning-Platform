<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <title>Document</title>
    <style>
        body{
            background-image: linear-gradient(-45deg, #56565a 40%, #101018 70%);
            color: aliceblue;
        }

        .main-bar{
            height: 100%;
            overflow-y: auto;
            position: fixed;
            right: 0;
            top: 0;
        }
        .main-bar figure{
            padding: 0.7rem;
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }
        .main-bar img{
            max-width: 100%;
            height: auto;
            border: 3px solid #697079;
        }
        @media (max-width: 768px) {
            .main-bar{
                position: relative;
            }
        }
        .courses{
            padding: 1rem 3rem;
            justify-content: space-between;
        }
        .course-content{
            position: relative;
            padding: 0.5rem;
            background-image: linear-gradient(-45deg, #35353a 38%, #44444b 50%);
        }
        .course-content h2{
            font-size: 1rem;
        }
        .course-content p{
            font-size: 0.8rem;
        }

        .course-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: transparent;
            opacity: 0;
            transition: opacity 0.3s ease; 
        }

        .course-content:hover .course-overlay {
            background-color: rgb(15, 15, 224);
            opacity: 0.47;
        }


        .sidebar{ 
            padding-bottom: 5rem;
            background-image: linear-gradient(-45deg, #2c2c2e 10%, #1f1f25 50%);
            color: aliceblue; 
        }

        .sidebar .side-box{
            height: 8rem; 
            font-size: 1.5rem;
            padding: 0.2rem 1.8rem;
            /* background-image: linear-gradient(-45deg, #c9a6fa 20%, #413eee 50%); */
        }

        .sidebar .side-box1 {
            min-height: 120%;
            background-image: linear-gradient(-45deg, #35353a 38%, #44444b 50%);
            border-radius: 0.5rem;
            position: relative; 
            overflow: hidden;
        }

        .sidebar .side-box2 {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 120%;
            background-image: linear-gradient(-45deg, #35353a 38%, #44444b 50%);
            border-radius: 0.7rem;
            position: relative; 
            overflow: hidden;
        }

        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: transparent;
            opacity: 0;
            transition: opacity 0.3s ease; 
        }

        .side-box1:hover .overlay {
            background-color: rgb(21, 21, 199);
            opacity: 0.5;
        }

        .side-box1 video {
            position: absolute; 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
            top: 0;
            left: 0;
        }

        @media (max-width: 768px) {
            .sidebar{
                display: none;
            }
        }
        
        .icon-container {
            width: 5rem;
            height: 5rem;
            background-image: linear-gradient(-45deg, #4d4d50 30%, #50182f 60%);
            box-shadow: 1px 1px 10px 8px rgba(152, 152, 153, 0.5);
            border-radius: 50%; 
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .icon-container i {
            color: #fff; 
            font-size: 33px; 
        }

        .icon-container button {
            background: none;
        }
        
        #exampleModal .modal-content{
            width: 40rem;
            background-image: linear-gradient(-45deg, #62626b 30%, #1d1d30 60%);
        }
        #content-form label{
            font-weight: bold;
            font-style: italic;
            font-size: 1.15rem;
        }
        #content-form input, textarea{ 
            font-style: italic;
            background-image: linear-gradient(-45deg, #4c4c55 40%, #202030 70%);
        }
        #content-form input:focus, textarea:focus {
            border-color: #007bff; 
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5); 
        }
        #content-form .btn{
            color: aquamarine;
            min-width: 15rem;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 0;
            background-color: #47475e;
            border: 2px solid rgb(45, 57, 66);
        }
        #content-form figure{
            padding-left: 8rem;
            max-width: 53%;
            height: auto;
            display: block;
            margin: 0 auto;
        }
        #content-form img{
            display: none;
            max-width: 53%;
            height: auto;
            border: 3px solid #697079;
        }
    </style>
</head>
<body>
    
        <div class="row mt-2">
            <div class="sidebar col-md-3 col-12">
                {{#if course_content.length }}
                {{#each course_content }}
                    <div class="side-box col-md-12 col-12 mt-5">
                        <figure class="side-box1 ">
                            {{!-- <img src="data: {{this.course_img.contentType}};base64,{{base64Encode this.course_img.data}}" alt="Tranding">
                            <div class="overlay"></div> --}}
                            <video  controls>
                                <source src="/video/{{this._id}}" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        </figure>
                    </div>
                {{/each }}  
                {{/if }}
                <div class="side-box col-md-12 col-12 mt-5"><div class="side-box2 ">
                    <div class="icon-container">
                         <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#exampleModal">
                            <i class="fas fa-plus"></i>
                         </button>
                    </div>
                </div></div>
            </div>
            <div class="main-bar col-md-9 col-12">
                {{!-- <form id="course-form" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="course-name" class="form-label">Course Name</label>
                        <input type="text" class="form-control textInput" id="course-name" name="course-name" aria-describedby="emailHelp">
                    </div>
                    <div class="mb-3">
                        <label for="course-field" class="form-label">Course Field</label>
                        <input type="text" class="form-control textInput" id="course-field" name="course-field">
                    </div>
                    <div class="mb-3">
                        <label for="course-desc" class="form-label">Course Description</label>
                        <textarea rows="4" class="form-control textAreaInput" id="course-desc" name="course-desc"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="course-image" class="form-label">Course Image</label>
                        <input type="file" class="form-control" id="course-image" name="course-image" accept="image/*">
                        <figure class="text-center">
                        <img id="preview-image" src="" >
                        </figure>
                    </div>
                    <div class="text-center">
                       <button type="submit" class="btn ">Submit</button>
                    </div>
                </form> --}}
                <div class="courses row">
                    {{#if courses.length }}
                    {{#each courses }}
                    <div class="course mt-3 col-md-3 col-6" data-course-id="{{this._id}}">
                        <div class="course-content">
                              <figure>
                                 <img src="data: {{this.course_img.contentType}};base64,{{base64Encode this.course_img.data}}" alt="Tranding">
                              </figure>
                              <h1 style="display: none;">{{this._id}}</h1>
                              <h2>{{this.course_name}}</h2>
                              <p>{{this.course_desc}}</p>
                              <div class="course-overlay"></div>
                        </div>
                    </div>
                    {{/each }}  
                    {{/if }}
                </div>
            </div>
        </div>

        




        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Fill The Details</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="content-form" action="/upload_content_video" method="POST" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="course-id" class="form-label">Course Id</label>
                        <input type="text" class="form-control textInput" value="{{ courseId }}" id="course-id" name="course_id" aria-describedby="emailHelp" >
                    </div>
                    <div class="mb-3">
                        <label for="course-name" class="form-label">Course Name</label>
                        <input type="text" class="form-control textInput" value="{{ courseName }}" id="course-name" name="course_name" >
                    </div>
                    <div class="mb-3">
                        <label for="topic-name" class="form-label">Topic Name</label>
                        <input type="text" class="form-control textInput" id="topic-name" name="topic_name">
                    </div>
                    <div class="mb-3">
                        <label for="content-name" class="form-label">Content Name</label>
                        <input type="text" class="form-control textInput" id="content-name" name="content_name">
                    </div>
                    <div style="display: none;">
                      <input type="text"  value="{{instructor_id}}" name="inst_id">
                    </div>
                    {{!-- <div class="mb-3">
                        <label for="course-desc" class="form-label">Course Description</label>
                        <textarea rows="4" class="form-control textAreaInput" id="course-desc" name="course-desc"></textarea>
                    </div> --}}
                        <input type="file" name="video" accept="video/*">
                        <input type="submit" value="Upload Video" style="color: aqua;">
                    {{!-- <div class="mb-3">
                        <label for="course-image" class="form-label">Course Image</label>
                        <input type="file" class="form-control" id="course-image" name="course-image" accept="image/*">
                        <figure class="text-center">
                        <img id="preview-image" src="" >
                        </figure>
                    </div> --}}
                    {{!-- <div class="text-center">
                       <button type="submit" class="btn ">Submit</button>
                    </div> --}}
                </form>
            </div>
            </div>
        </div>
        </div>


    

    





    <script>
            // Add a click event listener to all elements with the class 'clickable-image'
            document.querySelectorAll('.course').forEach(function(course) {
                course.addEventListener('click', function() {
                    // Retrieve the course ID from the 'data-course-id' attribute
                    const course_id = this.getAttribute('data-course-id');

                    // Send the course ID to another part of your application
                    // You can use this courseId to perform further actions
                    {{!-- console.log('Course ID:', courseId); --}}
                    const instructor_id = "{{instructor_id}}";
                    window.location.href = `/upload_content?course_id=${encodeURIComponent(course_id)}&instructor_id=${encodeURIComponent(instructor_id)}`; 
                });
            });
    </script>




    {{!-- scripts for showing content of perticular course --}}
    <script>
        document.addEventListener("DOMContentLoaded", function (){
            const swiperDivs = document.querySelectorAll(".course-content");
            swiperDivs.forEach((div) => {
                div.addEventListener("click", function () {
                    const course_id = div.querySelector("h1").textContent;
                    window.location.href = `/upload1?course_id=${encodeURIComponent(course_id)}`;  //&course_name=${encodeURIComponent(course_name)}&course_img=${encodeURIComponent(course_image)}
                });
            });
        });
    </script>

 
    
    {{!-- JavaScript to apply styles when typing in the input field --}}
    <script>
        const textInput = document.getElementsByClassName('textInput');
        
        var text1 = document.getElementById('course-id');
        var text2 = document.getElementById('course-name');
        text1.style.color = 'rgb(231, 236, 236)';
        text2.style.color = 'rgb(231, 236, 236)';
        
        textInput[0].addEventListener('input', function() {
        this.style.fontSize = '18px'; // Change font size
        this.style.color = 'rgb(231, 236, 236)';   // Change text color
        });

        textInput[1].addEventListener('input', function() {
        this.style.fontSize = '18px'; // Change font size
        this.style.color = 'rgb(231, 236, 236)';   // Change text color
        });

        textInput[2].addEventListener('input', function() {
        this.style.fontSize = '18px';
        this.style.color = 'rgb(231, 236, 236)';
        });

        textInput[3].addEventListener('input', function() {
        this.style.fontSize = '18px';
        this.style.color = 'rgb(231, 236, 236)';
        });
    </script>

    
    {{!-- JavaScript to handle image selection and preview --}}
    {{!-- <script>
        document.getElementById('course-image').addEventListener('change', function () {
            const previewImage = document.getElementById('preview-image');
            const input_img = document.getElementById('course-image'); 
            const fileInput = this;
            // console.log(previewImage);
            if (fileInput.files && fileInput.files[0]) {
                const reader = new FileReader();

                reader.onload = function (e) {
                    previewImage.src = e.target.result;
                    previewImage.style.display = 'block'; // Show the preview image
                    input_img.style.display = 'none';
                };

                reader.readAsDataURL(fileInput.files[0]);
            } else {
                previewImage.src = '';
                previewImage.style.display = 'none'; // Hide the preview image
            }
        });
    </script> --}}
    
       

    {{!-- nodejs scripts --}}
    <script type="text/javascript" src="../jq/jquery.js"></script>
    <script type="text/javascript" src="../js/bootstrap.js"></script>
</body>
</html>